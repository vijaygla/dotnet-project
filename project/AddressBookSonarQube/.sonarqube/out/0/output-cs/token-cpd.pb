¦
[C:\v\dotnet-project\AddressBookSonarQube\AddressBookSonarQube.Core\Utilities\FileManager.cs
	namespace 	 
AddressBookSonarQube
 
. 
Core #
.# $
	Utilities$ -
;- .
public 
static 
class 
FileManager 
{		 
public

 

static

 
void

 

SaveToFile

 !
(

! "

Dictionary

" ,
<

, -
string

- 3
,

3 4
AddressBook

5 @
>

@ A
books

B G
,

G H
string

I O
filePath

P X
)

X Y
{ 
var 
options 
= 
new !
JsonSerializerOptions /
{0 1
WriteIndented2 ?
=@ A
trueB F
}G H
;H I
var 
json 
= 
JsonSerializer !
.! "
	Serialize" +
(+ ,
books, 1
,1 2
options3 :
): ;
;; <
File 
. 
WriteAllText 
( 
filePath "
," #
json$ (
)( )
;) *
} 
public 

static 

Dictionary 
< 
string #
,# $
AddressBook% 0
>0 1
LoadFromFile2 >
(> ?
string? E
filePathF N
)N O
{ 
if 

( 
! 
File 
. 
Exists 
( 
filePath !
)! "
||# %
new& )
FileInfo* 2
(2 3
filePath3 ;
); <
.< =
Length= C
==D F
$numG H
)H I
return 
new 

Dictionary !
<! "
string" (
,( )
AddressBook* 5
>5 6
(6 7
)7 8
;8 9
var 
json 
= 
File 
. 
ReadAllText #
(# $
filePath$ ,
), -
;- .
return 
JsonSerializer 
. 
Deserialize )
<) *

Dictionary* 4
<4 5
string5 ;
,; <
AddressBook= H
>H I
>I J
(J K
jsonK O
)O P
?? 
new 

Dictionary  
<  !
string! '
,' (
AddressBook) 4
>4 5
(5 6
)6 7
;7 8
} 
} ÕR
aC:\v\dotnet-project\AddressBookSonarQube\AddressBookSonarQube.Core\Services\AddressBookService.cs
	namespace 	 
AddressBookSonarQube
 
. 
Core #
.# $
Services$ ,
;, -
public

 
class

 
AddressBookService

 
:

  !
IAddressBookService

" 5
{ 
private 

Dictionary 
< 
string 
, 
AddressBook *
>* +
_books, 2
;2 3
private 
readonly 
string 
	_filePath %
;% &
public 

AddressBookService 
( 
string $
filePath% -
)- .
{ 
	_filePath 
= 
filePath 
; 
_books 
= 
FileManager 
. 
LoadFromFile )
() *
	_filePath* 3
)3 4
;4 5
} 
public 

void 
CreateAddressBook !
(! "
string" (
name) -
)- .
{ 
if 

( 
_books 
. 
ContainsKey 
( 
name #
)# $
)$ %
throw 
new  
AddressBookException *
(* +
$str+ H
)H I
;I J
_books 
[ 
name 
] 
= 
new 
AddressBook &
(& '
name' +
)+ ,
;, -
FileManager 
. 

SaveToFile 
( 
_books %
,% &
	_filePath' 0
)0 1
;1 2
} 
public 

void 

AddContact 
( 
string !
bookName" *
,* +
Contact, 3
contact4 ;
); <
{ 
var   
book   
=   
GetBook   
(   
bookName   #
)  # $
;  $ %
if!! 

(!! 
book!! 
.!! 
Contacts!! 
.!! 
Any!! 
(!! 
c!! 
=>!!  "
c!!# $
.!!$ %
	FirstName!!% .
==!!/ 1
contact!!2 9
.!!9 :
	FirstName!!: C
)!!C D
)!!D E
throw"" 
new""  
AddressBookException"" *
(""* +
$str""+ >
)""> ?
;""? @
book$$ 
.$$ 
Contacts$$ 
.$$ 
Add$$ 
($$ 
contact$$ !
)$$! "
;$$" #
FileManager%% 
.%% 

SaveToFile%% 
(%% 
_books%% %
,%%% &
	_filePath%%' 0
)%%0 1
;%%1 2
}&& 
public(( 

void(( 
EditContact(( 
((( 
string(( "
bookName((# +
,((+ ,
string((- 3
	firstName((4 =
,((= >
Contact((? F
updated((G N
)((N O
{)) 
var** 
book** 
=** 
GetBook** 
(** 
bookName** #
)**# $
;**$ %
var++ 
contact++ 
=++ 
book++ 
.++ 
Contacts++ #
.++# $
FirstOrDefault++$ 2
(++2 3
c++3 4
=>++5 7
c++8 9
.++9 :
	FirstName++: C
==++D F
	firstName++G P
)++P Q
??,, 

throw,, 
new,,  
AddressBookException,, )
(,,) *
$str,,* =
),,= >
;,,> ?
contact.. 
... 
LastName.. 
=.. 
updated.. "
..." #
LastName..# +
;..+ ,
contact// 
.// 
Address// 
=// 
updated// !
.//! "
Address//" )
;//) *
contact00 
.00 
City00 
=00 
updated00 
.00 
City00 #
;00# $
contact11 
.11 
State11 
=11 
updated11 
.11  
State11  %
;11% &
contact22 
.22 
Zip22 
=22 
updated22 
.22 
Zip22 !
;22! "
contact33 
.33 
PhoneNumber33 
=33 
updated33 %
.33% &
PhoneNumber33& 1
;331 2
contact44 
.44 
Email44 
=44 
updated44 
.44  
Email44  %
;44% &
FileManager55 
.55 

SaveToFile55 
(55 
_books55 %
,55% &
	_filePath55' 0
)550 1
;551 2
}66 
public88 

void88 
DeleteContact88 
(88 
string88 $
bookName88% -
,88- .
string88/ 5
	firstName886 ?
)88? @
{99 
var:: 
book:: 
=:: 
GetBook:: 
(:: 
bookName:: #
)::# $
;::$ %
var;; 
contact;; 
=;; 
book;; 
.;; 
Contacts;; #
.;;# $
FirstOrDefault;;$ 2
(;;2 3
c;;3 4
=>;;5 7
c;;8 9
.;;9 :
	FirstName;;: C
==;;D F
	firstName;;G P
);;P Q
??<< 

throw<< 
new<<  
AddressBookException<< )
(<<) *
$str<<* =
)<<= >
;<<> ?
book>> 
.>> 
Contacts>> 
.>> 
Remove>> 
(>> 
contact>> $
)>>$ %
;>>% &
FileManager?? 
.?? 

SaveToFile?? 
(?? 
_books?? %
,??% &
	_filePath??' 0
)??0 1
;??1 2
}@@ 
publicBB 

ListBB 
<BB 
ContactBB 
>BB 
GetAllContactsBB '
(BB' (
stringBB( .
bookNameBB/ 7
)BB7 8
=>CC 
GetBookCC 
(CC 
bookNameCC 
)CC 
.CC 
ContactsCC !
;CC! "
publicEE 

ListEE 
<EE 
ContactEE 
>EE 
SearchByCityEE %
(EE% &
stringEE& ,
cityEE- 1
)EE1 2
=>FF 
_booksFF 
.FF 
ValuesFF 
.FF 

SelectManyFF 
(FF  
bFF  !
=>FF" $
bFF% &
.FF& '
ContactsFF' /
)FF/ 0
.GG 
WhereGG 

(GG
 
cGG 
=>GG 
cGG 
.GG 
CityGG 
==GG 
cityGG 
)GG 
.GG  
ToListGG  &
(GG& '
)GG' (
;GG( )
publicII 

ListII 
<II 
ContactII 
>II 
SearchByStateII &
(II& '
stringII' -
stateII. 3
)II3 4
=>JJ 
_booksJJ 
.JJ 
ValuesJJ 
.JJ 

SelectManyJJ 
(JJ  
bJJ  !
=>JJ" $
bJJ% &
.JJ& '
ContactsJJ' /
)JJ/ 0
.KK 
WhereKK 

(KK
 
cKK 
=>KK 
cKK 
.KK 
StateKK 
==KK 
stateKK  
)KK  !
.KK! "
ToListKK" (
(KK( )
)KK) *
;KK* +
publicMM 


DictionaryMM 
<MM 
stringMM 
,MM 
intMM !
>MM! "
CountByCityMM# .
(MM. /
)MM/ 0
=>NN 
_booksNN 
.NN 
ValuesNN 
.NN 

SelectManyNN 
(NN  
bNN  !
=>NN" $
bNN% &
.NN& '
ContactsNN' /
)NN/ 0
.OO 	
GroupByOO	 
(OO 
cOO 
=>OO 
cOO 
.OO 
CityOO 
)OO 
.PP 	
ToDictionaryPP	 
(PP 
gPP 
=>PP 
gPP 
.PP 
KeyPP  
,PP  !
gPP" #
=>PP$ &
gPP' (
.PP( )
CountPP) .
(PP. /
)PP/ 0
)PP0 1
;PP1 2
publicRR 


DictionaryRR 
<RR 
stringRR 
,RR 
intRR !
>RR! "
CountByStateRR# /
(RR/ 0
)RR0 1
=>SS 
_booksSS 
.SS 
ValuesSS 
.SS 

SelectManySS 
(SS  
bSS  !
=>SS" $
bSS% &
.SS& '
ContactsSS' /
)SS/ 0
.TT 	
GroupByTT	 
(TT 
cTT 
=>TT 
cTT 
.TT 
StateTT 
)TT 
.UU 	
ToDictionaryUU	 
(UU 
gUU 
=>UU 
gUU 
.UU 
KeyUU  
,UU  !
gUU" #
=>UU$ &
gUU' (
.UU( )
CountUU) .
(UU. /
)UU/ 0
)UU0 1
;UU1 2
publicWW 

ListWW 
<WW 
ContactWW 
>WW 
SortByWW 
(WW  
FuncWW  $
<WW$ %
ContactWW% ,
,WW, -
stringWW. 4
>WW4 5
keySelectorWW6 A
)WWA B
=>XX 
_booksXX 
.XX 
ValuesXX 
.XX 

SelectManyXX 
(XX  
bXX  !
=>XX" $
bXX% &
.XX& '
ContactsXX' /
)XX/ 0
.YY 	
OrderByYY	 
(YY 
keySelectorYY 
)YY 
.YY 
ToListYY $
(YY$ %
)YY% &
;YY& '
private[[ 
AddressBook[[ 
GetBook[[ 
([[  
string[[  &
name[[' +
)[[+ ,
=>\\ 
_books\\ 
.\\ 
GetValueOrDefault\\ 
(\\  
name\\  $
)\\$ %
??]] 
throw]] 
new]]  
AddressBookException]] %
(]]% &
$str]]& >
)]]> ?
;]]? @
}^^ ¨
TC:\v\dotnet-project\AddressBookSonarQube\AddressBookSonarQube.Core\Models\Contact.cs
	namespace 	 
AddressBookSonarQube
 
. 
Core #
.# $
Models$ *
;* +
public 
class 
Contact 
{ 
public 

string 
	FirstName 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 

string 
LastName 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 

string 
Address 
{ 
get 
;  
set! $
;$ %
}& '
=( )
string* 0
.0 1
Empty1 6
;6 7
public		 

string		 
City		 
{		 
get		 
;		 
set		 !
;		! "
}		# $
=		% &
string		' -
.		- .
Empty		. 3
;		3 4
public

 

string

 
State

 
{

 
get

 
;

 
set

 "
;

" #
}

$ %
=

& '
string

( .
.

. /
Empty

/ 4
;

4 5
public 

string 
Zip 
{ 
get 
; 
set  
;  !
}" #
=$ %
string& ,
., -
Empty- 2
;2 3
public 

string 
PhoneNumber 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
string. 4
.4 5
Empty5 :
;: ;
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
=& '
string( .
.. /
Empty/ 4
;4 5
} ¿
XC:\v\dotnet-project\AddressBookSonarQube\AddressBookSonarQube.Core\Models\AddressBook.cs
	namespace 	 
AddressBookSonarQube
 
. 
Core #
.# $
Models$ *
;* +
public 
class 
AddressBook 
{ 
public		 

string		 
Name		 
{		 
get		 
;		 
set		 !
;		! "
}		# $
public

 

List

 
<

 
Contact

 
>

 
Contacts

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
=

0 1
new

2 5
(

5 6
)

6 7
;

7 8
public 

AddressBook 
( 
string 
name "
)" #
{ 
Name 
= 
name 
; 
} 
} Ï
dC:\v\dotnet-project\AddressBookSonarQube\AddressBookSonarQube.Core\Interfaces\IAddressBookService.cs
	namespace 	 
AddressBookSonarQube
 
. 
Core #
.# $

Interfaces$ .
;. /
public 
	interface 
IAddressBookService $
{		 
void

 
CreateAddressBook

	 
(

 
string

 !
name

" &
)

& '
;

' (
void 

AddContact	 
( 
string 
bookName #
,# $
Contact% ,
contact- 4
)4 5
;5 6
void 
EditContact	 
( 
string 
bookName $
,$ %
string& ,
	firstName- 6
,6 7
Contact8 ?
updated@ G
)G H
;H I
void 
DeleteContact	 
( 
string 
bookName &
,& '
string( .
	firstName/ 8
)8 9
;9 :
List 
< 	
Contact	 
> 
GetAllContacts  
(  !
string! '
bookName( 0
)0 1
;1 2
List 
< 	
Contact	 
> 
SearchByCity 
( 
string %
city& *
)* +
;+ ,
List 
< 	
Contact	 
> 
SearchByState 
(  
string  &
state' ,
), -
;- .

Dictionary 
< 
string 
, 
int 
> 
CountByCity '
(' (
)( )
;) *

Dictionary 
< 
string 
, 
int 
> 
CountByState (
(( )
)) *
;* +
List 
< 	
Contact	 
> 
SortBy 
( 
Func 
< 
Contact %
,% &
string' -
>- .
keySelector/ :
): ;
;; <
} ë
eC:\v\dotnet-project\AddressBookSonarQube\AddressBookSonarQube.Core\Exceptions\AddressBookException.cs
	namespace 	 
AddressBookSonarQube
 
. 
Core #
.# $

Exceptions$ .
;. /
public 
class  
AddressBookException !
:" #
	Exception$ -
{ 
public		 
 
AddressBookException		 
(		  
string		  &
message		' .
)		. /
:		0 1
base		2 6
(		6 7
message		7 >
)		> ?
{		@ A
}		B C
}

 